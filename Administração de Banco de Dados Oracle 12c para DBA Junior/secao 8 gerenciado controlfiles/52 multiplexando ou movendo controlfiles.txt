52 multiplexando ou movendo controlfiles




SQL> SHOW PARAMETER CONTROL;

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
control_file_record_keep_time        integer     7
control_files                        string      +DATA/AL1/CONTROLFILE/current.
                                                 261.1025063903, +ARCH/AL1/CONT
                                                 ROLFILE/current.256.1025063905
control_management_pack_access       string      DIAGNOSTIC+TUNING








SELECT NAME FROM V$CONTROLFILE;


SPFILE - PODE FAZER DINAMICO, ENQUANDO O DB ESTA LIGADO 


SHOW PARAMETER SPFILE 




ALTER SYSTEM SET CONTROL_FILES = '+DATA/AL1/CONTROLFILE/current.261.1025063903', 
'+ARCH/AL1/CONTROLFILE/controlfile03.dbf' scope=spfile;







exit 


parar o banco 
e colocar nomount 

srvctl status database -d AL1






srvctl stop database -d AL1



srvctl start database -d AL1 -o nomount



rman target / 
restaurar para o novo destino 




restore controlfile from '+DATA/AL1/CONTROLFILE/current.261.1025063903'






Starting restore at 24-NOV-19
using target database control file instead of recovery catalog
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=42 device type=DISK

channel ORA_DISK_1: copied control file copy
output file name=+DATA/AL1/CONTROLFILE/current.261.1025063903
output file name=+ARCH/AL1/CONTROLFILE/controlfile03.dbf
Finished restore at 24-NOV-19








sqlplus / as sysdba


SELECT STATUS FROM V$INSTANCE;




ALTER DATABASE MOUNT;





ALTER DATABASE OPEN;















